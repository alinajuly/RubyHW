<h1>Cart</h1>

<% if current_cart.line_items.any? %>
  <table class="table">
    <tr>
      <th>Image</th>
      <th>Name</th>
      <th>Quantity</th>
      <th></th>
      <th>Price</th>
      <th>Delete</th>
    </tr>
    <% current_cart.transformed_line_items.each do |line_item| %>
      <tr>
        <td><%= image_tag image_url(line_item[:image]), width: 100, height: 100 %></td>
        <td><%= line_item[:name] %></td>
        <td><%= line_item[:quantity] %></td>
        <td><%= link_to "-", line_item_path(id: line_item[:id], decrease_quantity: true, data: {method: :put}), class: "btn btn-light" %>
            <%= link_to "+", line_item_path(id: line_item[:id], increase_quantity: true, data: { method: :put }), class: "btn btn-light" %></td>
        <td><%= number_to_currency(line_item[:price]) %></td>
        <td>delete</td>
      </tr>
    <% end %>
      <tr>
      <td></td>
      <td></td>
      <td></td>
      <td><b>Total price:</b></td>
      <td><b><%= number_to_currency current_cart.total_price%></b></td>
    </tr>
  </table>
<% else %>
  <p>No items in the card</p>
<% end %>
